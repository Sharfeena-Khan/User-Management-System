<%-include("../layouts/header.ejs")-%>
<section class="my-auto" style="background-image: url('https://wallpapercave.com/wp/wp2933953.jpg');">
    <div class="container ">
      <div class="row ">
        <div class="col mx-auto">

          

          <div style="margin-left: 1000px;">
            <p class=" text-white-50 mt-5 mb-5  text-center"> <a href="/adminLogout" 
                class="fw-bold text-white  text-center px-3 py-2 card-glow" >Logout </a></p>
        </div>
       
        
        <div class="col-12 col-md-4 mx-auto mt-5" >
          <div class="input-group mb-5" style="margin-top: -78px; margin-left: 80px; ">
            <form action="/adminPannel" method="get">
              <input type="text"  class=" rounded" name="search" placeholder="Search" aria-label="Search" aria-describedby="search-addon" />
              
            <button type="submit" class="btn btn-dark fw-bold">Search</button>
         
            </form>
             </div>
          <h1 class="text-center text-white">Admin Pannel</h1>
            <table class="table table-dark " id="myTable">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Name</th>
                    <th scope="col">Email</th>
                    <th scope="col">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <% userList.forEach(function(data) { %>
                   
                  <tr>
                    
                    <td><%= data.name %></td>
                    <td><%= data.email %></td>
                    <td>
                      <span>
                        <button onclick="conformDelete('<%= data._id %>')" class="btn btn-danger " >Delete</button>
                        <!--<a class="btn btn-danger mx-1" href="/deleteUser/<%= data._id %>" onclick="conformDelete('<%= data._id %>')">Deleta</a>-->
                      </span>
                      <span>
                        
                        <a class="btn btn-success  " href="/editUser/<%= data._id %>">Edit</a>
                      </span>
                    </td>
                  </tr>
                   <% }) %>
                   
                </tbody>
              </table>
              <div class="d-grid gap-2 col-6 mx-auto my-5">
        
                <button class="btn btn-dark card-glow " type="button"><a href="/addNewUser" >Add New User</a></button>
              </div>
        </div>
      </div>
      </div>
    </div>
   
</section>
    

<script>
  // Get the table
const table = document.getElementById("myTable");

// Get all rows in the table body
const rows = table.getElementsByTagName("tr");

// Start the serial number from 1 (skip the header row)
let serialNumber = 1;

// Loop through rows and add serial numbers
for (let i = 1; i < rows.length; i++) {
  const cell = document.createElement("td");
  cell.textContent = serialNumber++;
  
  // Insert the serial number as the first cell in each row
  rows[i].insertBefore(cell, rows[i].firstChild);
}


</script>
<script>
  function conformDelete(userId){
    if(confirm("Are you sure want to Delete this User?")){
      window.location.href="/deleteUser/"+userId
    }
  }
</script>

<%-include("../layouts/footer.ejs")-%>   